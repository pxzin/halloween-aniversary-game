# Game Design Document: Halloween Anniversary

## 1. Game Overview

*   **Game Concept:** A surprise birthday gift for the user's girlfriend, presented as a point-and-click adventure game.
*   **Genre:** Point-and-click adventure, puzzle.
*   **Target Audience:** The user's girlfriend (primary), fans of casual puzzle and adventure games.
*   **Theme:** Halloween, mystery, humor.
*   **Platform:** Web (PC).

## 2. Narrative

### 2.1. Logline

On Halloween night, after failing a demonic Duolingo quiz, a young woman finds herself cursed and trapped in a haunted version of her boyfriend's house. She must solve a series of puzzles to find her real-world birthday gifts and break the curse before midnight.

### 2.2. Opening Scene

On the evening of October 31st--her birthday--Jéssica is at home, waiting for her boyfriend Ric (the user) to arrive for their anniversary dinner, or perhaps for her family's birthday party to begin. While waiting, she gets a furious notification from the Duolingo Owl about her activity streak. The owl seems possessed, but Jéssica dismisses it as a bizarre Halloween prank.

Upon opening the app, she faces a frantic quiz in multiple languages (Portuguese, English, Italian). The questions become nonsensical and psychedelic, the timer speeds up, and the owl grows increasingly agitated.

As she inevitably fails the quiz, the enraged owl curses her soul, proclaiming that the only way to reverse it is... but the phone explodes from the evil power before she can hear the solution.

Jéssica faints from the shock. She awakens hours later in front of Ric's house, which now appears haunted and desolate in an empty city. This is where the game begins.

## 3. Gameplay

*   **Core Mechanic:** Point-and-click. Players will navigate static scenes (modified photos of the user's house), find items, and solve puzzles.
*   **Objective:** The main goal is to find the five hidden birthday gifts: a cell phone, clothes, wine, cheese, and chocolates. Collecting all five gifts will unlock the Office, where Jéssica can break the curse.
*   **Puzzles:** Puzzles will involve finding and combining items, unlocking new areas, and solving logic-based challenges related to the Halloween theme and the couple's personal inside jokes.

## 4. Art Style

*   **Visuals:** Pixel art with a Halloween aesthetic.
*   **Source:** The game's backgrounds will be generated by an AI, using real photos of Ric's house as a base, transforming them into spooky, stylized scenes.
*   **Characters:** Character art will be presented as dialogue portraits (bust-up profile images, similar to JRPG character portraits). We will need a set of portraits for the main character, Jéssica, to convey different emotions (e.g., neutral, scared, happy, thinking).

## 5. Characters

*   **Protagonist:** Jéssica Birelo. The player character.
*   **Supporting Character:** Ric. Jéssica's boyfriend. The house where the game takes place belongs to him.
*   **Antagonist:** The Duolingo Owl. A demonic, possessed version of the language app mascot who has cursed Jéssica.

## 6. Game Flow

1.  **Introduction:** The opening narrative sequence (non-interactive).
2.  **Exploration & Puzzles:** Jéssica explores the house, solving puzzles to find the five hidden birthday gifts.
3.  **Office Unlocked:** Once all five gifts are collected, the Office (`Cenário 7`) becomes accessible.
4.  **Final Puzzle:** In the Office, Jéssica must use the collected gifts to perform a ritual and break the curse.
5.  **Conclusion:** The curse is broken, and the game transitions to a final "Happy Birthday" message from the user, revealing the real-world gifts.

## 7. Game Scenes & Flow

This section details the specific scenes and the navigation paths between them.

*   **Cenário 1: Abertura (Pesadelo)**
    *   *Scene: Non-interactive introductory cutscene.*
*   **Cenário 2: Fachada da Casa (Haunted House Façade)**
    *   **Interaction:** Click on the gate.
    *   **Leads to:** `Cenário 3 (Escada)`
*   **Cenário 3: Escada (Stairs)**
    *   **Interaction 1:** Click on the balcony door.
    *   **Leads to:** `Cenário 3.1 (Sacada)`
    *   **Interaction 2:** Click on the main hallway door.
    *   **Leads to:** `Cenário 4 (Corredor)`
*   **Cenário 3.1: Sacada (Balcony)**
    *   **Interaction:** Click to return.
    *   **Leads to:** `Cenário 3 (Escada)`
*   **Cenário 4: Corredor (Hallway)**
    *   **Interaction 1:** Click on the backyard door.
    *   **Leads to:** `Cenário 5 (Quintal)`
    *   **Interaction 2:** Click on the living room door.
    *   **Leads to:** `Cenário 6 (Sala)`
*   **Cenário 5: Quintal (Backyard)**
    *   **Interaction:** Click to return.
    *   **Leads to:** `Cenário 4 (Corredor)`
*   **Cenário 6: Sala (Living Room)**
    *   **Interaction 1:** Click to return to the hallway.
    *   **Leads to:** `Cenário 4 (Corredor)`
    *   **Interaction 2:** Click on the office door.
    *   **Leads to:** `Cenário 7 (Escritório)`
    *   **Interaction 3:** Click on the kitchen entrance.
    *   **Leads to:** `Cenário 8 (Cozinha)`
*   **Cenário 7: Escritório (Office)**
    *   **Interaction:** Click to return.
    *   **Leads to:** `Cenário 6 (Sala)`
*   **Cenário 8: Cozinha (Kitchen)**
    *   **Interaction 1:** Click to return to the living room.
    *   **Leads to:** `Cenário 6 (Sala)`
    *   **Interaction 2:** Click on the bathroom door.
    *   **Leads to:** `Cenário 9 (Banheiro)`
    *   **Interaction 3:** Click on the bedroom door.
    *   **Leads to:** `Cenário 10 (Quarto)`
*   **Cenário 9: Banheiro (Bathroom)**
    *   **Interaction:** Click to return.
    *   **Leads to:** `Cenário 8 (Cozinha)`
*   **Cenário 10: Quarto (Bedroom)**
    *   **Interaction:** Click to return.
    *   **Leads to:** `Cenário 8 (Cozinha)`
    *   **Sub-view:** A separate view for the clothes closets.

## 8. Puzzle Design

### Puzzle 01: The Gate Lock

*   **Location:** `Cenário 2: Fachada da Casa`
*   **Objective:** Unlock the main gate to gain access to the `Cenário 3: Escada`.
*   **Interaction:** The entire gate is the clickable area. Clicking it will bring up a UI element of a 4-digit combination lock.
*   **Clue:** The lock is branded with the word "iFood".
*   **Solution:** The player must enter one of two valid 4-digit codes: `2531` or `9393`. Either code will successfully open the lock.

### Puzzle 02: The Hallway Key

*   **Locations:** `Cenário 3: Escada` & `Cenário 3.1: Sacada`
*   **Objective:** Find the key to unlock the door leading to the `Cenário 4: Corredor`.
*   **Atmospheric Interaction:** In the `Escada` scene, there will be millipedes on the steps. Players can click on them to squash them, providing a small, satisfying, and spooky interaction without affecting the puzzle.
*   **Sequence:**
    1.  From the `Escada`, the player will find the door to the `Corredor` is locked.
    2.  The player must navigate to the `Sacada`.
    3.  On the `Sacada`, the player can click on several plant pots. The key is hidden in one of them.
    4.  Clicking the correct pot adds the key to the player's inventory.
    5.  The player must return to the `Escada`.
    6.  With the key in the inventory, clicking on the `Corredor` door will now unlock and open it.

### Puzzle 03: The Note from the Owl

*   **Location:** `Cenário 4: Corredor`
*   **Type:** Narrative/Objective Reveal
*   **Interaction:** A note is visible, tacked to the hallway wall. Clicking on it brings up a close-up view.
*   **Content:** The note is from the demonic Duolingo Owl and reads:
    > "You thought you could escape? Your curse is bound to this house. To break it, you must find the **five offerings** before the witching hour. Your time is running out."
*   **Objective Reveal:** Below the text are five crude, child-like drawings of the five birthday gifts: a cell phone, a piece of clothing, a wine bottle, a chocolate bar, and a piece of cheese.
*   **Gameplay Impact:** This interaction formally assigns the main quest to the player. It should trigger the appearance of the main UI/inventory, showing five empty slots corresponding to the drawings on the note.

### Puzzle 04: The Cat's Treasure

*   **Objective:** Obtain the key to the Living Room (`Cenário 6: Sala`).
*   **Cross-location Items Required:**
    *   **Lighter:** Player starts with this item.
    *   **Miniature Rake:** Must be acquired from the `Cenário 3.1: Sacada`.
    *   **Broom:** Must be acquired from the `Cenário 4: Corredor`.
*   **Puzzle Sequence in `Cenário 5: Quintal`:**
    1.  **Light the Area:** The player must first collect the **hand sanitizer (álcool gel)** from above the washing machine. They then use the sanitizer on the barbecue grill, followed by the **lighter** to create light.
    2.  **Identify the Obstacle:** The light reveals a **cat house** on a high shelf. A message indicates something is inside but it's out of reach. A cat is also blocking physical access.
    3.  **Lure the Cat:** The player finds a **can of cat food** in the cabinets. They must use the **miniature rake** (from the balcony) to pry it open.
    4.  Placing the opened can on the central table will lure the cat away from the shelf.
    5.  **Retrieve the Key:** With the cat gone, the player can now use the **broom** (from the hallway) to knock the **Living Room Key** out of the cat house.
    6.  The player can now pick up the key from the floor.

### Puzzle 05: The Scaredy Cat

*   **Location:** `Cenário 6: Sala`
*   **Objective:** Retrieve the first gift: the **Cell Phone**.
*   **Part 1: Tidying Up**
    *   The room is initially messy, with chairs blocking access to a cabinet and the office door.
    *   The first interaction is to click on the chairs to "Tidy up the room".
    *   **Time Penalty:** This action costs the player **5 minutes** on the game clock.
*   **Part 2: The Sleeping Guardian**
    *   After tidying, the player can open the cabinet.
    *   Inside, the cat "Sombra" is sleeping on top of the cell phone.
    *   Clicking on the cat triggers a dialogue with three choices:
        1.  Yell at the cat.
        2.  Make a "pspsps" sound.
        3.  Clap hands.
*   **Solution:** Choosing "Clap hands" scares Sombra away, who runs out of the cabinet.
*   **Reward:** The player can now collect the **Cell Phone**.

### Puzzle 06: The Frozen Key

*   **Location:** `Cenário 8: Cozinha`.
*   **Objective:** Retrieve the second gift: the **Wine**.
*   **Riddle:** The clue for this puzzle comes from the cell phone: "...o caminho está fechado para quem não aguenta o calor."
*   **Sequence:**
    1.  In the kitchen, Jéssica can see a refrigerator, an induction stove, and a modern wine cooler with an `icy lock`.
    2.  Inside the refrigerator's freezer compartment, she finds a **"key of ice"**.
    3.  Trying the `key of ice` on the `icy lock` fails, with a message: "The key is the right shape, but it's too big and doesn't fit."
    4.  The solution is to use the induction stove. The player must turn it on to the **lowest possible heat setting**.
    5.  The player then uses the `key of ice` on the gently heated stove, which transforms it into a **"slightly melted ice key"**.
    6.  This `slightly melted ice key` now fits the `icy lock` on the wine cooler, opening it.
    7.  **Reward:** The player can now collect the **Wine**.

### Puzzle 07: The Stinky Key

*   **Location:** `Cenário 9: Banheiro`.
*   **Objective:** Find and clean the key to the Bedroom (`Cenário 10: Quarto`).
*   **Cross-location Item Required:**
    *   **Miniature Rake:** Must be acquired from the `Cenário 3.1: Sacada`.
*   **Sequence:**
    1.  In the bathroom, Jéssica can see a dirty cat litter box in the shower stall and a cabinet under the sink.
    2.  Using the `miniature rake` on the `litter box` unearths a **"dirty key"**.
    3.  If the player tries to use the `dirty key` on the Bedroom door, they will refuse due to it being too gross.
    4.  If the player tries to use the sink to clean the key, they discover there is no running water.
    5.  The player must interact with the cabinet under the sink to find a pack of **"wet wipes"**.
    6.  In the inventory, the player must **combine** the `dirty key` with the `wet wipes`.
    7.  This combination produces the clean **"Bedroom Key"**.
    8.  **Reward:** The player can now unlock the door to the Bedroom.

### Puzzle 08: The Hand Gesture Enigma

*   **Location:** `Cenário 10: Quarto` (with two separate views).
*   **Objective:** Retrieve the third gift: the **Clothes**.
*   **Sequence:**
    1.  Jéssica enters the Bedroom (`Cenário 10: Quarto`, View 1).
    2.  She finds a large, old, locked wardrobe. There's an interactive panel on its door.
    3.  In View 1 of the Bedroom (e.g., on a dresser or under a rug), she finds an **"old note"**.
    4.  This `old note` contains three distinct drawings:
        *   A **coxinha** (Brazilian snack).
        *   A **mini heart**.
        *   A **sketch of the user's photo**.
    5.  The player must interpret these visual clues as the corresponding emojis: **🤌 (coxinha), 🫰 (mini heart), 😘 (kissing face - representing the user's photo)**.
    6.  Jéssica navigates to **View 2 (Closets View)**.
    7.  In View 2, there are three interactive points (e.g., stylized hand gestures or emoji representations) corresponding to the three emojis.
    8.  The player must interact with these points in the correct sequence: **🤌, 🫰, 😘**.
    9.  Upon successful input, the wardrobe in View 1 opens.
    10. **Reward:** Jéssica finds the **Clothes** gift inside the wardrobe.

### Puzzle 09: The Frozen Treasure (Chocolates)

*   **Location:** `Cenário 8: Cozinha` (View 1 - Refrigerator/Freezer).
*   **Objective:** Retrieve the fourth gift: the **Chocolates**.
*   **Clue:** A note from Ric (the user) found elsewhere (e.g., Living Room or Office) explaining the chocolates were put in the freezer due to melting, and mentioning the strange ice keys.
*   **Sequence:**
    1.  In the freezer compartment of the refrigerator, Jéssica finds several **"ice keys"** (beyond the one used for the wine cooler).
    2.  The player must interact with and remove all these `ice keys` from the freezer.
    3.  Once all `ice keys` are removed, the **Chocolates** are revealed at the bottom of the freezer.
    4.  **Reward:** Jéssica collects the **Chocolates**.

### Puzzle 10: Ric's Cheese Safe

*   **Location:** `Cenário 9: Banheiro`.
*   **Objective:** Retrieve the fifth gift: the **Cheese**.
*   **Clue:** Ric's Diary, found in the `Cenário 5: Quintal`.
*   **Sequence:**
    1.  In the `Banheiro`, Jéssica finds a **small safe** with a geometric symbol input panel.
    2.  Interacting with the safe, Jéssica notices a strong cheese smell and a dialogue indicates she's sure cheese is inside, but doesn't know the password. She also notes the bathroom has *multiple sources of bad smells*.
    3.  In the `Quintal` (e.g., on a shelf or behind a pot), Jéssica finds **Ric's Diary**.
    4.  Reading Ric's Diary (close-up UI) reveals an entry:
        > "Querida Jéssica,
        > Tenho tido umas experiências muito estranhas ultimamente, como se estivesse viajando entre o nosso mundo e um mundo de Halloween. Agora, parece que fiquei preso aqui. Estou com tanta fome, e felizmente tenho meu queijo guardado no cofre. Mas, para minha infelicidade, esqueci a senha! Anotei-a na geladeira do nosso mundo real. Se ao menos eu pudesse encontrá-la...
        > Sinto tanto a sua falta, meu amor. Mal posso esperar para te ver de novo.
        > Com saudades, Ric."
    5.  **Fourth Wall Break:** The clue "anotada na geladeira do nosso mundo real" directs the player (your girlfriend) to look at *your actual real-world refrigerator* for a note with geometric symbols.
    6.  Jéssica returns to the safe in the `Banheiro` and inputs the sequence of geometric symbols.
    7.  **Reward:** The safe opens, revealing the **Cheese**.

## 9. Easter Eggs

### Easter Egg 01: The Magic Weed Joint

*   **Location:** Available anywhere in the game (except during the Introduction scene).
*   **Type:** Hidden comedic interaction.
*   **Items Required:**
    *   **Isqueiro (Lighter):** Jessica starts with this item in her inventory from the beginning.
    *   **Ponta de Erva Boa (Weed Joint):** Jessica also starts with this item in her inventory.
*   **Trigger:** The player must use the game's item combination mechanic (Shift+Click):
    1.  Shift+Click on the **Isqueiro** to select it as the first item for combination.
    2.  Shift+Click on the **Ponta de Erva Boa** to combine it with the lighter.
*   **Sequence:**
    1.  Upon combining the lighter with the joint, Jessica decides to smoke it.
    2.  A comedic dialogue sequence plays out, showing:
        *   Jessica lighting up and taking several drags.
        *   Her getting relaxed and making funny, lighthearted comments about the haunted house.
        *   Her losing track of what she was supposed to be doing.
    3.  Suddenly, the **Duolingo Owl** appears, furious.
    4.  The Owl reveals that the joint had **MAGICAL PROPERTIES**.
    5.  The Owl explains that if Jessica had **shared** the joint with him, he would have become so chill that he'd lift the curse entirely.
    6.  However, since Jessica smoked it all by herself, she will **remain cursed** and must continue solving puzzles.
    7.  Jessica's response is nonchalant and humorous, embracing the Halloween vibe despite missing her chance at an easy exit.
*   **Gameplay Impact:**
    *   **The Lighter is NOT consumed** - it remains in the inventory after the combination.
    *   **The Weed Joint IS consumed** - it is removed from the inventory after use.
    *   **No Game Progress** - This is purely a comedic Easter Egg with no impact on puzzle progression.
    *   **One-Time Trigger** - The dialogue can only be triggered once per playthrough.
*   **Dialogue Highlights:** (See `src/game/data/dialogues/easter_egg_weed.json` for the full script)
    *   Jessica's funny observations while high: "As paredes estão meio dançantes... mas tipo, de um jeito legal, sabe?"
    *   The Owl's furious revelation: "Essa 'pontinha' que você fumou sozinha... ela tem propriedades MÁGICAS!"
    *   Jessica's casual reaction: "Mas tipo... ainda valeu a pena. Tava uma erva boa mesmo. Valeu FANTASMA!! 👻"
*   **Implementation Details:**
    *   The combination is handled by the `CombinationService` in `src/game/services/CombinationService.ts`.
    *   The recipe uses the `keepItems` property to preserve the lighter.
    *   The dialogue is triggered via the `onCombine` callback using the `DialogueManager`.
    *   The inventory panel is intentionally **hidden during the Introduction scene** to prevent players from triggering this Easter Egg before the game properly begins.

## 10. Final Puzzle: The Pentagram of the Curse

*   **Location:** `Cenário 7: Escritório`.
*   **Objective:** Break the Duolingo Owl's curse.
*   **Prerequisite:** All five gifts (Cell Phone, Wine, Clothes, Chocolates, Cheese) must be collected.
*   **Sequence:**
    1.  Once all five gifts are in Jéssica's inventory, the door to the `Escritório` becomes accessible.
    2.  Inside the `Escritório`, there is a large, central area (e.g., a rug or a marked spot on the floor) where a pentagram can be formed.
    3.  The player must use each of the five collected gifts on a specific point of the pentagram.
    4.  Upon placing all five gifts correctly, a magical ritual is performed.

